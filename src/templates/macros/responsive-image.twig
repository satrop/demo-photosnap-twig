{# 
  Responsive Image Macro
  @param {string} imagePath - The base path to the image (without desktop/tablet/mobile folder)
  @param {string} alt - Alt text for the image
  @param {string} className - Optional CSS class name(s)
  @param {boolean} decorative - If true, image is decorative and alt text will be empty
  @param {boolean} ariaHidden - If true, adds aria-hidden="true"
#}

{% macro responsiveImage(imagePath, alt, className = '', decorative = false, ariaHidden = false) %}
    {% set filename = imagePath|split('/')|last %}
    {% set basePath = imagePath|replace('/' ~ filename, '') %}
    
    <picture>
        {# Mobile WebP #}
        <source
            srcset="{{ basePath }}/mobile/{{ filename }}.webp"
            media="(max-width: 767px)"
            type="image/webp"
        >
        {# Mobile JPG fallback #}
        <source
            srcset="{{ basePath }}/mobile/{{ filename }}.jpg"
            media="(max-width: 767px)"
            type="image/jpeg"
        >
        {# Tablet WebP #}
        <source
            srcset="{{ basePath }}/tablet/{{ filename }}.webp"
            media="(max-width: 1023px)"
            type="image/webp"
        >
        {# Tablet JPG fallback #}
        <source
            srcset="{{ basePath }}/tablet/{{ filename }}.jpg"
            media="(max-width: 1023px)"
            type="image/jpeg"
        >
        {# Desktop WebP #}
        <source
            srcset="{{ basePath }}/desktop/{{ filename }}.webp"
            type="image/webp"
        >
        {# Desktop JPG fallback #}
        <img 
            src="{{ basePath }}/desktop/{{ filename }}.jpg"
            alt="{{ decorative ? '' : alt }}"
            class="{{ className }}"
            {{ ariaHidden ? 'aria-hidden="true"' : '' }}
        >
    </picture>
{% endmacro %}
